<!-- home.html -->
<div class="container-fluid">
	<h3 class="page_title">{{application.name}}</h3>

	<div class="row">
		<div class="col s12">
			<ul class="tabs">
				<li class="tab col s3"><a class="active" href="#tab_survey">Survey</a></li>
				<li class="tab col s3 disabled">
					<a style="cursor:not-allowed" href="#tab_action_plan"> Action plan </a>
				</li>
			</ul>
		</div>
		<div id="tab_survey" class="col s12">
			<table class="questions_table">
				<col width="10%">
				<col width="75%">
				<col width="15%">
				<thead>
					<tr>
						<th>QID</th>
						<th>Question</th>
						<th>Answer</th>
					</tr>
				</thead>
				<tbody ng-repeat="question in mandatoryQuestions">
					<tr style="border-left:5px {{ getHexColorForCategory(question.category) }} solid; margin-bottom:5px">
						<td>{{ question.id}}</td>
						<td>
							<span class="new badge left no-margin {{ getColorForCategory(question.category) }}" data-badge-caption="{{ question.category }}"></span><br/><br/>
							{{ question.question }}
						</td>
						<td ng-init="question.answer=question.answer">
							<p>
								<input name="group_{{$index}}" type="radio" id="answer_yes_{{$index}}" value="yes" ng-model="question.answer" ng-change="updateAnswer(question)" />
								<label for="answer_yes_{{$index}}">Yes</label>
							</p>
							<p>
								<input name="group_{{$index}}" type="radio" id="answer_no_{{$index}}" value="no" ng-model="question.answer" ng-change="updateAnswer(question)"/>
								<label for="answer_no_{{$index}}">No</label>
							</p>
							<p>
								<input name="group_{{$index}}" type="radio" id="answer_unknown_{{$index}}" value="unknown" ng-model="question.answer" ng-change="updateAnswer(question)"/>
								<label for="answer_unknown_{{$index}}">Unknown</label>
							</p>
						</td>
					</tr>
					<tr ng-repeat="subQuestion in getSubQuestions(question)" ng-show="question.answer === 'yes'"  style="border-left:5px {{ getHexColorForCategory(question.category) }} solid; margin-bottom:5px">
		                <td>{{ subQuestion.id}}</td>
						<td>
							<span class="new badge left no-margin {{ getColorForCategory(subQuestion.category) }}" data-badge-caption="{{ subQuestion.category }}"></span><br/><br/>
							{{ subQuestion.question }}
						</td>
						<td ng-init="subQuestion.answer=subQuestion.answer" >
							<p>
								<input name="sub_group_{{$index}}" type="radio" id="sub_answer_yes_{{$index}}" value="yes" ng-model="subQuestion.answer" ng-change="updateAnswer(question)" />
								<label for="sub_answer_yes_{{$index}}">Yes</label>
							</p>
							<p>
								<input name="sub_group_{{$index}}" type="radio" id="sub_answer_no_{{$index}}" value="no" ng-model="subQuestion.answer" ng-change="updateAnswer(question)"/>
								<label for="sub_answer_no_{{$index}}">No</label>
							</p>
							<p>
								<input name="sub_group_{{$index}}" type="radio" id="sub_answer_unknown_{{$index}}" value="unknown" ng-model="subQuestion.answer" ng-change="updateAnswer(question)"/>
								<label for="sub_answer_unknown_{{$index}}">Unknown</label>
							</p>
						</td>             
		            </tr>
				</tbody>
			</table>  
		</div>
		<div id="tab_action_plan" class="col s12">Action plan</div>
	</div>
</div>
